(self.webpackChunkbanana_cake_pop=self.webpackChunkbanana_cake_pop||[]).push([[418],{43036:(e,t,n)=>{"use strict";n.d(t,{G:()=>o,S:()=>r});var i=n(38344),s=n(91848);function r(e,t,n){return(0,i.Co)(["mutex"],"readwrite",(async i=>{const r=await i.store.mutex.get(e),o=()=>i.store.mutex.put({resource:e,owner:t,expiresAt:(0,s.kX)()+n});return r?(r.owner===t||r.expiresAt<(0,s.kX)())&&(await o(),!0):(await o(),!0)}))}function o(e){return(0,i.kT)((t=>t.delete("mutex",e)))}},60388:(e,t,n)=>{"use strict";n(38344)},62684:(e,t,n)=>{"use strict";n.d(t,{Q:()=>o});n(60864),n(85824),n(26144),n(60328),n(32880),n(3184);var i=n(58680),s=n(91848),r=n(78196);async function o(e){var t;const n=await(0,r.eK)();return{uri:(0,s.mK)(e)?e:new URL(e,null!==(t=null===n||void 0===n?void 0:n.apiUrl)&&void 0!==t?t:"https://api.chillicream.com").href,headers:function(e){const t=new Headers;if(t.set("BCP-Agent",i.im),t.set("GraphQL-Agent",i.im),t.set("GraphQL-Client-Id",i.q8),t.set("GraphQL-Client-Version",i.c5),t.set("GraphQL-Defer-RFC","v2"),!e)throw new r.g5;t.set("Authorization","Bearer ".concat(e));return t}(null===n||void 0===n?void 0:n.accessToken)}}},86216:(e,t,n)=>{"use strict";n.d(t,{m:()=>o});n(98352),n(60864);var i=n(58680),s=n(27644),r=n(91848);function o(e,t,n){var o;const c=null!==(o=null===n||void 0===n?void 0:n.expiry)&&void 0!==o?o:i.oT,l=(0,r.WU)("mutex");return async function(e,t,n){for(;!await(0,s.ScE)(e,t,n);)await(0,r.oL)(i.AF)}(e,l,c).then((async()=>{const n=new r.o_(c);try{const[e]=await Promise.all([t(n.signal.toAbortSignal()).then((e=>(n.cancel(),e))),n.signal.toPromise()]);return e}catch(i){if((0,r.cT)(i))throw new a(e);throw i}finally{n.cancel(),await(0,s.G8w)(e)}}))}class a extends Error{constructor(e){super('Lock for resource "'.concat(e,'" has been expired'))}}},85168:(e,t,n)=>{"use strict";n.d(t,{_:()=>f});n(98352),n(2856),n(60864);var i=n(91848),s=n(96728),r=n.n(s),o=n(39512),a=n(87608),c=n(42504),l=n(26876),h=n(20836),u=n(71243),d=n(9764),m=n(35628),p=n(48480);const v="undefined"!==typeof n.g?n.g:"undefined"!==typeof window?window:{},g=v.WebSocket||v.MozWebSocket;class f{constructor(e,t,n,i){this.client=void 0,this.operations=void 0,this.url=void 0,this.nextOperationId=void 0,this.connectionParams=void 0,this.minWsTimeout=void 0,this.wsTimeout=void 0,this.unsentMessagesQueue=void 0,this.reconnect=void 0,this.reconnecting=void 0,this.reconnectionAttempts=void 0,this.backoff=void 0,this.connectionCallback=void 0,this.eventEmitter=void 0,this.lazy=void 0,this.inactivityTimeout=void 0,this.inactivityTimeoutId=void 0,this.closedByUser=void 0,this.wsImpl=void 0,this.wsProtocols=void 0,this.wasKeepAliveReceived=void 0,this.tryReconnectTimeoutId=void 0,this.checkConnectionIntervalId=void 0,this.maxConnectTimeoutId=void 0,this.middlewares=void 0,this.maxConnectTimeGenerator=void 0,this.wsOptionArguments=void 0,this.wsOnMessage=void 0;const{connectionCallback:s,connectionParams:a={},minTimeout:c=l.Kq,timeout:h=l._w,reconnect:d=!1,reconnectionAttempts:m=1/0,lazy:p=!1,inactivityTimeout:v=0,wsOptionArguments:f=[],onMessage:b}=t||{};if(this.wsOnMessage=b,this.wsImpl=n||g,!this.wsImpl)throw new Error("Unable to find native implementation, or alternative implementation for WebSocket!");this.wsProtocols=i||u.WC,this.connectionCallback=s,this.url=e,this.operations={},this.nextOperationId=0,this.minWsTimeout=c,this.wsTimeout=h,this.unsentMessagesQueue=[],this.reconnect=d,this.reconnecting=!1,this.reconnectionAttempts=m,this.lazy=!!p,this.inactivityTimeout=v,this.closedByUser=!1,this.backoff=new(r())({jitter:.5}),this.eventEmitter=new o.EventEmitter,this.middlewares=[],this.client=null,this.maxConnectTimeGenerator=this.createMaxConnectTimeGenerator(),this.connectionParams=this.getConnectionParams(a),this.wsOptionArguments=f,this.lazy||this.connect()}get status(){return null===this.client?this.wsImpl.CLOSED:this.client.readyState}close(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.clearInactivityTimeout(),null!==this.client&&(this.closedByUser=t,e&&(this.clearCheckConnectionInterval(),this.clearMaxConnectTimeout(),this.clearTryReconnectTimeout(),this.unsubscribeAll(),this.sendMessage(void 0,h.c.GQL_CONNECTION_TERMINATE,null)),this.client.close(),this.client.onopen=null,this.client.onclose=null,this.client.onerror=null,this.client.onmessage=null,this.client=null,this.eventEmitter.emit("disconnected"),e||this.tryReconnect())}request(e){const t=this.getObserver.bind(this),n=this.executeOperation.bind(this),i=this.unsubscribe.bind(this);let s=null;return this.clearInactivityTimeout(),{[p.c](){return this},subscribe(r,o,a){const c=t(r,o,a);return s=n(e,((e,t)=>{null===e&&null===t?c.complete&&c.complete():e?c.error&&c.error(e[0]):c.next&&c.next(t)})),{unsubscribe:()=>{s&&(i(s),s=null)}}}}}on(e,t,n){const i=this.eventEmitter.on(e,t,n);return()=>{i.off(e,t,n)}}onConnected(e,t){return this.on("connected",e,t)}onConnecting(e,t){return this.on("connecting",e,t)}onDisconnected(e,t){return this.on("disconnected",e,t)}onReconnected(e,t){return this.on("reconnected",e,t)}onReconnecting(e,t){return this.on("reconnecting",e,t)}onError(e,t){return this.on("error",e,t)}unsubscribeAll(){Object.keys(this.operations).forEach((e=>{this.unsubscribe(e)}))}applyMiddlewares(e){return new Promise(((t,n)=>{((i,s)=>{const r=o=>{if(o)n(o);else if(i.length>0){const t=i.shift();t&&t.applyMiddleware.apply(s,[e,r])}else t(e)};r()})([...this.middlewares],this)}))}use(e){return e.forEach((e=>{if(!(0,i.mg)(e.applyMiddleware))throw new Error("Middleware must implement the applyMiddleware function.");this.middlewares.push(e)})),this}getConnectionParams(e){return()=>new Promise(((t,n)=>{if((0,i.mg)(e))try{return t(e.call(null))}catch(s){return n(s)}t(e)}))}executeOperation(e,t){null===this.client&&this.connect();const n=this.generateOperationId();return this.operations[n]={options:e,handler:t},this.applyMiddlewares(e).then((e=>{this.checkOperationOptions(e,t),this.operations[n]&&(this.operations[n]={options:e,handler:t},this.sendMessage(n,h.c.GQL_START,e))})).catch((e=>{this.unsubscribe(n),t(this.formatErrors(e))})),n}getObserver(e,t,n){return(0,i.mg)(e)?{next:t=>e(t),error:e=>t&&t(e),complete:()=>n&&n()}:e}createMaxConnectTimeGenerator(){const e=this.minWsTimeout,t=this.wsTimeout;return new(r())({min:e,max:t,factor:1.2})}clearCheckConnectionInterval(){this.checkConnectionIntervalId&&(clearInterval(this.checkConnectionIntervalId),this.checkConnectionIntervalId=null)}clearMaxConnectTimeout(){this.maxConnectTimeoutId&&(clearTimeout(this.maxConnectTimeoutId),this.maxConnectTimeoutId=null)}clearTryReconnectTimeout(){this.tryReconnectTimeoutId&&(clearTimeout(this.tryReconnectTimeoutId),this.tryReconnectTimeoutId=null)}clearInactivityTimeout(){this.inactivityTimeoutId&&(clearTimeout(this.inactivityTimeoutId),this.inactivityTimeoutId=null)}setInactivityTimeout(){this.inactivityTimeout>0&&0===Object.keys(this.operations).length&&(this.inactivityTimeoutId=setTimeout((()=>{0===Object.keys(this.operations).length&&this.close()}),this.inactivityTimeout))}checkOperationOptions(e,t){const{query:n,variables:i,operationName:s}=e;if(!n)throw new Error("Must provide a query.");if(!t)throw new Error("Must provide an handler.");if(!(0,m.c)(n)&&!(0,c.M)(n,s)||s&&!(0,m.c)(s)||i&&!(0,d.c)(i))throw new Error("Incorrect option types. query must be a string or a document,`operationName` must be a string, and `variables` must be an object.")}buildMessage(e,t,n){return{id:e,type:t,payload:n&&n.query?{...n,query:"string"===typeof n.query?n.query:(0,a.S)(n.query)}:n}}formatErrors(e){return Array.isArray(e)?e:e&&e.errors?this.formatErrors(e.errors):e&&e.message?[e]:[{name:"FormattedError",message:"Unknown error",originalError:e}]}sendMessage(e,t,n){this.sendMessageRaw(this.buildMessage(e,t,n))}sendMessageRaw(e){switch(this.status){case this.wsImpl.OPEN:let n=JSON.stringify(e);try{JSON.parse(n)}catch(t){this.eventEmitter.emit("error",new Error("Message must be JSON-serializable. Got: ".concat(e)))}this.client.send(n);break;case this.wsImpl.CONNECTING:this.unsentMessagesQueue.push(e);break;default:this.reconnecting||this.eventEmitter.emit("error",new Error("A message was not sent because socket is not connected, is closing or is already closed. Message was: "+JSON.stringify(e)))}}generateOperationId(){return String(++this.nextOperationId)}tryReconnect(){if(!this.reconnect||this.backoff.attempts>=this.reconnectionAttempts)return;this.reconnecting||(Object.keys(this.operations).forEach((e=>{this.unsentMessagesQueue.push(this.buildMessage(e,h.c.GQL_START,this.operations[e].options))})),this.reconnecting=!0),this.clearTryReconnectTimeout();const e=this.backoff.duration();this.tryReconnectTimeoutId=setTimeout((()=>{this.connect()}),e)}flushUnsentMessagesQueue(){this.unsentMessagesQueue.forEach((e=>{this.sendMessageRaw(e)})),this.unsentMessagesQueue=[]}checkConnection(){this.wasKeepAliveReceived?this.wasKeepAliveReceived=!1:this.reconnecting||this.close(!1,!0)}checkMaxConnectTimeout(){this.clearMaxConnectTimeout(),this.maxConnectTimeoutId=setTimeout((()=>{this.status!==this.wsImpl.OPEN&&(this.reconnecting=!0,this.close(!1,!0))}),this.maxConnectTimeGenerator.duration())}connect(){this.client=new this.wsImpl(this.url,this.wsProtocols,...this.wsOptionArguments),this.checkMaxConnectTimeout(),this.client.onopen=async()=>{if(this.status===this.wsImpl.OPEN){this.clearMaxConnectTimeout(),this.closedByUser=!1,this.eventEmitter.emit(this.reconnecting?"reconnecting":"connecting");try{const e=await this.connectionParams();this.sendMessage(void 0,h.c.GQL_CONNECTION_INIT,e),this.flushUnsentMessagesQueue()}catch(e){this.sendMessage(void 0,h.c.GQL_CONNECTION_ERROR,e),this.flushUnsentMessagesQueue()}}},this.client.onclose=()=>{this.closedByUser||this.close(!1,!1)},this.client.onerror=e=>{this.eventEmitter.emit("error",e)},this.client.onmessage=e=>{var t;let{data:n}=e;null===(t=this.wsOnMessage)||void 0===t||t.call(this,n),this.processReceivedData(n)}}processReceivedData(e){let t,n;try{t=JSON.parse(e),n=t.id}catch(i){throw new Error("Message must be JSON-parseable. Got: ".concat(e))}if(-1===[h.c.GQL_DATA,h.c.GQL_COMPLETE,h.c.GQL_ERROR].indexOf(t.type)||this.operations[n])switch(t.type){case h.c.GQL_CONNECTION_ERROR:this.connectionCallback&&this.connectionCallback(t.payload);break;case h.c.GQL_CONNECTION_ACK:this.eventEmitter.emit(this.reconnecting?"reconnected":"connected",t.payload),this.reconnecting=!1,this.backoff.reset(),this.maxConnectTimeGenerator.reset(),this.connectionCallback&&this.connectionCallback();break;case h.c.GQL_COMPLETE:const e=this.operations[n].handler;delete this.operations[n],e.call(this,null,null);break;case h.c.GQL_ERROR:this.operations[n].handler(this.formatErrors(t.payload),null),delete this.operations[n];break;case h.c.GQL_DATA:const i=t.payload.errors?{...t.payload,errors:this.formatErrors(t.payload.errors)}:t.payload;this.operations[n].handler(null,i);break;case h.c.GQL_CONNECTION_KEEP_ALIVE:const s="undefined"===typeof this.wasKeepAliveReceived;this.wasKeepAliveReceived=!0,s&&this.checkConnection(),this.checkConnectionIntervalId&&(clearInterval(this.checkConnectionIntervalId),this.checkConnection()),this.checkConnectionIntervalId=setInterval(this.checkConnection.bind(this),this.wsTimeout);break;default:throw new Error("Invalid message type!")}else this.unsubscribe(n)}unsubscribe(e){this.operations[e]&&(delete this.operations[e],this.setInactivityTimeout(),this.sendMessage(e,h.c.GQL_STOP,void 0))}}},72402:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});const i=function(){var e=[{alias:null,args:null,concreteType:"EnsureTunnelSessionPayload",kind:"LinkedField",name:"ensureTunnelSession",plural:!1,selections:[{alias:null,args:null,concreteType:"TunnelSession",kind:"LinkedField",name:"tunnelSession",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"sessionId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"expiresIn",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"getTunnelSessionIdMutation",selections:e,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"getTunnelSessionIdMutation",selections:e},params:{id:"083471db369440da34b27ae5b3763cf0",metadata:{},name:"getTunnelSessionIdMutation",operationKind:"mutation",text:null}}}();i.hash="600299e510b50e81f1bf0b9714fc6c48";const s=i},11148:(e,t,n)=>{"use strict";n.d(t,{M:()=>o,S:()=>a});n(2856),n(60864);var i=n(58680),s=n(22276),r=n(91848);class o{constructor(){this.handlers=[],this.responseHandlers=new Map}handleMessage(e,t){const n=this.responseHandlers.get(t.id);n?n(t,e):this.handlers.filter((e=>e.type===t.type)).forEach((n=>{let{handle:i}=n;return i(t,e)}))}registerReceiveMessageHandler(e,t){const n={type:e,handle:t};return this.handlers.push(n),()=>{const e=this.handlers.indexOf(n);this.handlers.splice(e,1)}}sendAndReceiveMessage(e){let t,n,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2?arguments[2]:void 0;return(0,r.wh)((()=>{var e;return null===(e=n)||void 0===e?void 0:e()}),(()=>new Promise(((c,l)=>{n=()=>{self.clearTimeout(t),l(r.Oy),(0,s.wH)(this.getContext(),e.id),this.responseHandlers.delete(e.id)},t=o?void 0:self.setTimeout((()=>{l("Timeout exceeded 60 sec."),this.responseHandlers.delete(e.id)}),i.yI),this.responseHandlers.set(e.id,(e=>{if(null===a||void 0===a||!a.aborted){if((0,s.Kg)(e)){const{errorMessage:t,kind:n,details:i}=e.payload;l(new s.IM(t,n,i))}else c(e.payload);self.clearTimeout(t),this.responseHandlers.delete(e.id)}})),this.getContext().sendMessage(e)}))),a)}sendMessage(e){this.getContext().sendMessage(e)}}class a{constructor(e,t,n){this.type=e,this.payload=t,this.id=void 0,this.createdAt=void 0,this.id=n||(0,r.WU)(),this.createdAt=(0,r.kX)()}}},82440:(e,t,n)=>{"use strict";n.d(t,{Oy:()=>s,Y7:()=>u,cT:()=>h,mA:()=>l,o_:()=>c,wh:()=>d});n(28708),n(27608);const i="AbortError",s=new DOMException("Action cancelled",i),r="Action timed out",o=new DOMException(r,i);class a{constructor(e,t){this._signal=e,this._checkIfCancelled=t,this._promise=void 0}get aborted(){return this._signal.aborted}get cancelled(){return this._checkIfCancelled()}get onabort(){return this._signal.onabort}get reason(){return this._signal.reason}dispatchEvent(e){return this._signal.dispatchEvent(e)}throwIfAborted(){this._signal.throwIfAborted()}toAbortSignal(){return this._signal}toPromise(){if(this._promise)return this._promise;const e=this;let t=!1;return this._promise=new Promise(((n,i)=>{if(e.aborted)return t=!0,void i(o);if(e.cancelled)return t=!0,void n();function s(){e.removeEventListener("abort",s),e.removeEventListener("cancelled",r),t||(t=!0,i(o))}function r(){e.removeEventListener("abort",s),e.removeEventListener("cancelled",r),t||(t=!0,n())}e.addEventListener("abort",s),e.addEventListener("cancelled",r)})),this._promise}addEventListener(e,t,n){this._signal.addEventListener(e,t,n)}removeEventListener(e,t,n){this._signal.removeEventListener(e,t,n)}}class c{constructor(e){this._controller=new AbortController,this._signal=new a(this._controller.signal,(()=>this._cancelled)),this._cancelled=!1,this._timeoutHandle=void 0,this._timeoutHandle=self.setTimeout((()=>{this.abort(r)}),e)}get signal(){return this._signal}abort(e){this._controller.abort(e)}cancel(){this._cancelled=!0,self.clearTimeout(this._timeoutHandle),this._signal.dispatchEvent(new Event("cancelled"))}}function l(e){return e instanceof DOMException&&e.name===i}function h(e){return l(e)&&e.message===r}function u(e,t){const n=new AbortController;if(e.aborted||t.aborted){var i;n.abort(null!==(i=e.reason)&&void 0!==i?i:t.reason)}else{function s(e){return()=>{n.signal.aborted||n.abort(e.reason)}}function r(){n.signal.removeEventListener("abort",r),e.removeEventListener("abort",s(e)),t.removeEventListener("abort",s(t))}n.signal.addEventListener("abort",r),e.addEventListener("abort",s(e)),t.addEventListener("abort",s(t))}return n.signal}function d(e,t,n){return n?n.aborted?Promise.reject(s):(n.addEventListener("abort",e),t().finally((()=>{n.removeEventListener("abort",e)}))):t()}},23852:(e,t,n)=>{"use strict";n.d(t,{S:()=>r});var i=n(72552),s=n.n(i);function r(){let e=new(s());for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return n.forEach((t=>e=e.update(t))),e.digest("hex")}},73208:(e,t,n)=>{"use strict";n.d(t,{m:()=>s});var i=n(58680);function s(e){return i.iM.test(e)}},66832:(e,t,n)=>{"use strict";n(60864)},38764:(e,t,n)=>{"use strict";function i(e){return new Promise((t=>{self.setTimeout(t,e)}))}n.d(t,{o:()=>i})},55828:(e,t,n)=>{"use strict";n.d(t,{Ev:()=>i,OC:()=>s,mg:()=>r});const i=e=>r(Object(e)[Symbol.asyncIterator]);function s(e){return null!==e&&"object"===typeof e&&!Array.isArray(e)}function r(e){return"function"===typeof e}},89392:()=>{},73236:()=>{},13716:()=>{},56604:e=>{"use strict";e.exports=JSON.parse('{"uU":"Banana Cake Pop","WU":"16.0.1"}')}}]);